# 第 2 章 - 编程风格 - 注释

## 2.1 单行注释

单行注释有三种使用方法。

- 独占一行的注释，用来解释下一行代码。**这行注释之前总是有一个空行**，且缩进层级和下一行代码保持一致。
- 在代码行的尾部的注释。代码结束到注释之间**至少有一个缩进**。注释（包括之前的代码部分）不应当超过单行最大字数限制，如果超过了，就将这条注释放置于当前代码行的上方。
- 被注释掉的大段代码。

**单行注释不应当以连续多行注释的形式出现，除非是注释掉一大段代码。** 只有当需要注释一段很长的文本时才使用多行注释。

## 2.1 多行注释

Zakas 比较青睐 Java 风格的多行注释。

```javascript
/*
 * 另一段注释
 * 这段注释包含两行文本
 */
```

多行注释总是会出现在将要描述的代码段之前，注释和代码之间没有空行间隔。和单行注释一样，多行注释之前应当有一个空行，且缩进层级和其描述的代码保持一致。

## 2.3 使用注释

略

## 2.4 文档注释

从技术的角度讲，文档注释并不是 JavaScript 的组成部分，但它们是一种普遍的实践。文档注释有很多种格式，但最流行的一种格式来自于 JavaDoc 文档格式：多行注释以单斜线加双星号（/**）开始，接下来是描述信息，其中使用 @ 符号来表示一个或多个属性。

书中的一个例子：

```javascript
/**
返回一个对象，这个对象包含被提供对象的所有属性。
后一个对象的属性会覆盖前一个对象的属性。
传入一个单独的对象，会创建一个它的浅拷贝（shallow copy）。
如果需要深拷贝（deep copy），请使用 'clone()'
@method merge
@param {Object} 被合并的一个或多个对象
@return {Object} 一个新的合并后的对象
**/
```

## 2.5 注释声明

（此小结参考附录 A.7.3 注释声明）

注释有时候也可以用来给一段代码声明额外的信息。这些声明的格式以单个单词打头并紧跟一个冒号。可使用的声明如下。

- TODO 说明代码还未完成，应当包含下一步要做的事情
- HACK 表明代码实现走了一个捷径，应当包含为何使用 hack 的原因
- XXX 说明代码是有问题的并应当尽快修复
- FIXME 说明代码是有问题的并应当尽快修复。重要性略次于 XXX
- REVIEW 说明代码任何可能的改动都需要评审（个人觉得 REVIEW 的意思是这段代码日后需要重新评审）

这些声明可能在一行或多行注释中使用，并且应当遵循同一般注释类型相同的格式规则。

```javascript
// 好的写法
// TODO: 我希望找到一种更快的方式
dosomething();

// 好的写法
/*
* HACK: 不得不针对 IE 做的特殊处理，我计划后续有时间时
* 重写这部分。 这些代码可能需要在 v1.2 版本之前替换掉。
*/
if (document.all) {
  dosomething();
}

// 好的写法
// REVIEW: 有更好的方法吗？
if (document.all) {
  dosomething();
}
```
